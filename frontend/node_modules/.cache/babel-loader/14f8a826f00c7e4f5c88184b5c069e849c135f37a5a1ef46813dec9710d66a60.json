{"ast":null,"code":"// src/components/Movie/MovieCard.js\nimport React,{useContext}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import api from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MovieCard=_ref=>{let{movie}=_ref;const{user}=useContext(AuthContext);const token=localStorage.getItem('token');// Ensure the token is fetched correctly\nconst handleAddToList=async()=>{var _user$defaultList;const listId=user===null||user===void 0?void 0:(_user$defaultList=user.defaultList)===null||_user$defaultList===void 0?void 0:_user$defaultList._id;// Get the default list ID\nif(!listId){console.error('Default list ID is undefined');return;}try{const response=await api.post(\"/lists/add-movie\",{listId,movieId:movie.imdbID// Use the IMDb ID here\n},{headers:{Authorization:\"Bearer \".concat(token)}});console.log('Movie added to list:',response.data);// Add logging\n}catch(error){console.error(\"Error adding movie to list:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:movie.Title,className:\"w-full h-64 object-cover\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mt-2\",children:movie.Title}),/*#__PURE__*/_jsx(\"h1\",{children:\"Anoop\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:movie.Year}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:user?/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToList,className:\"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded\",children:\"Add to List\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Please sign in to add this movie to your list.\"})})]});};export default MovieCard;","map":{"version":3,"names":["React","useContext","AuthContext","api","jsx","_jsx","jsxs","_jsxs","MovieCard","_ref","movie","user","token","localStorage","getItem","handleAddToList","_user$defaultList","listId","defaultList","_id","console","error","response","post","movieId","imdbID","headers","Authorization","concat","log","data","className","children","src","Poster","alt","Title","Year","onClick"],"sources":["C:/Users/Anoop Pandey/Desktop/Anoop/movieapp/frontend/src/components/Movie/MovieCard.js"],"sourcesContent":["// src/components/Movie/MovieCard.js\r\nimport React, { useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport api from \"../../utils/api\";\r\n\r\nconst MovieCard = ({ movie }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const token = localStorage.getItem('token'); // Ensure the token is fetched correctly\r\n\r\n  const handleAddToList = async () => {\r\n    const listId = user?.defaultList?._id; // Get the default list ID\r\n    if (!listId) {\r\n      console.error('Default list ID is undefined');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await api.post(\r\n        \"/lists/add-movie\",\r\n        {\r\n          listId,\r\n          movieId: movie.imdbID // Use the IMDb ID here\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      console.log('Movie added to list:', response.data); // Add logging\r\n    } catch (error) {\r\n      console.error(\"Error adding movie to list:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"border p-4 rounded\">\r\n      <img\r\n        src={movie.Poster}\r\n        alt={movie.Title}\r\n        className=\"w-full h-64 object-cover\"\r\n      />\r\n      <h3 className=\"text-lg font-bold mt-2\">{movie.Title}</h3>\r\n      <h1>Anoop</h1>\r\n      <p className=\"text-gray-600\">{movie.Year}</p>\r\n      <div className=\"mt-4\">\r\n        {user ? (\r\n          <button\r\n            onClick={handleAddToList}\r\n            className=\"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded\"\r\n          >\r\n            Add to List\r\n          </button>\r\n        ) : (\r\n          <p>Please sign in to add this movie to your list.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieCard;\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,SAAS,CAAGC,IAAA,EAAe,IAAd,CAAEC,KAAM,CAAC,CAAAD,IAAA,CAC1B,KAAM,CAAEE,IAAK,CAAC,CAAGV,UAAU,CAACC,WAAW,CAAC,CACxC,KAAM,CAAAU,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAE7C,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,KAAAC,iBAAA,CAClC,KAAM,CAAAC,MAAM,CAAGN,IAAI,SAAJA,IAAI,kBAAAK,iBAAA,CAAJL,IAAI,CAAEO,WAAW,UAAAF,iBAAA,iBAAjBA,iBAAA,CAAmBG,GAAG,CAAE;AACvC,GAAI,CAACF,MAAM,CAAE,CACXG,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAC,CAC7C,OACF,CAEA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnB,GAAG,CAACoB,IAAI,CAC7B,kBAAkB,CAClB,CACEN,MAAM,CACNO,OAAO,CAAEd,KAAK,CAACe,MAAO;AACxB,CAAC,CACD,CACEC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYhB,KAAK,CAChC,CACF,CACF,CAAC,CACDQ,OAAO,CAACS,GAAG,CAAC,sBAAsB,CAAEP,QAAQ,CAACQ,IAAI,CAAC,CAAE;AACtD,CAAE,MAAOT,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAED,mBACEd,KAAA,QAAKwB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC3B,IAAA,QACE4B,GAAG,CAAEvB,KAAK,CAACwB,MAAO,CAClBC,GAAG,CAAEzB,KAAK,CAAC0B,KAAM,CACjBL,SAAS,CAAC,0BAA0B,CACrC,CAAC,cACF1B,IAAA,OAAI0B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAEtB,KAAK,CAAC0B,KAAK,CAAK,CAAC,cACzD/B,IAAA,OAAA2B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd3B,IAAA,MAAG0B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEtB,KAAK,CAAC2B,IAAI,CAAI,CAAC,cAC7ChC,IAAA,QAAK0B,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClBrB,IAAI,cACHN,IAAA,WACEiC,OAAO,CAAEvB,eAAgB,CACzBgB,SAAS,CAAC,wEAAwE,CAAAC,QAAA,CACnF,aAED,CAAQ,CAAC,cAET3B,IAAA,MAAA2B,QAAA,CAAG,gDAA8C,CAAG,CACrD,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}